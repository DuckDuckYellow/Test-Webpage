{% extends "base.html" %}

{% block title %}Newton's Repository{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero hero-home">
    <div class="container">
        <h1 class="display-4 fw-bold">Newton's Repository</h1>
        <p class="lead">A place for me to store my projects and ideas</p>
    </div>
</section>

<!-- Latest Article Section -->
{% if latest_article %}
<section class="py-5">
    <div class="container">
        <h2 class="h4 mb-4 text-muted">Latest from the Blog</h2>
        <div class="card article-card article-card-horizontal">
            <div class="article-card-image-wrapper">
                <img src="{{ url_for('static', filename='images/morecambe-logo.png') }}"
                     alt="Morecambe FC"
                     onerror="this.parentElement.innerHTML='<span class=\'text-muted\'>FM</span>'">
            </div>
            <div class="card-body d-flex flex-column">
                <div class="mb-2">
                    <span class="part-badge part-badge-morecambe">Part {{ latest_article.part }}</span>
                    <span class="ms-2 text-muted small">{{ latest_article.category_name }}</span>
                </div>
                <h3 class="h5 card-title mb-2">{{ latest_article.title }}</h3>
                <p class="article-excerpt mb-3 flex-grow-1">{{ latest_article.excerpt }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <span class="article-meta">
                        {{ format_date(latest_article.date) }} &bull; {{ latest_article.reading_time }} min read
                    </span>
                    <a href="{{ url_for('blog.article', category_id=latest_article.category_id, article_id=latest_article.id) }}"
                       class="btn btn-primary btn-sm">
                        Read Article &rarr;
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Quick Links Section -->
<section class="py-5 bg-white">
    <div class="container">
        <div class="row g-4">
            <!-- Blog Section -->
            <div class="col-md-6">
                <div class="card h-100 category-card">
                    <div class="card-body">
                        <h3 class="h5 mb-3">Blog</h3>
                        <p class="text-muted mb-3">
                            Detailed narrative stories from my Football Manager saves. Tactical breakdowns,
                            transfer sagas, and the emotional journey of virtual management.
                        </p>
                        <ul class="list-unstyled mb-3">
                            {% for cat_id, category in categories.items() %}
                            <li class="mb-2">
                                <a href="{{ url_for('blog.blog_category', category_id=cat_id) }}" class="text-decoration-none">
                                    {{ category.name }} - {{ category.subtitle }}
                                </a>
                                <span class="text-muted small">({{ category.articles|length }} parts)</span>
                            </li>
                            {% endfor %}
                        </ul>
                        <a href="{{ url_for('blog.blog_home') }}" class="btn btn-outline-primary btn-sm">
                            View All Categories &rarr;
                        </a>
                    </div>
                </div>
            </div>

            <!-- Projects Section -->
            <div class="col-md-6">
                <div class="card h-100 project-card">
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <h3 class="h5 mb-0">Personal Projects</h3>
                            <span class="coming-soon-badge ms-2">Coming Soon</span>
                        </div>
                        <p class="text-muted mb-3">
                            A collection of coding projects and useful tools. From meal planners to
                            FM analytics utilities - practical solutions to everyday problems.
                        </p>
                        <ul class="list-unstyled mb-3">
                            {% for project in projects %}
                            <li class="mb-2 text-muted">
                                <span class="me-2">&#8226;</span>
                                {{ project.name }}
                                <span class="project-badge ms-1">{{ project.status }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                        <a href="{{ url_for('projects.projects_home') }}" class="btn btn-outline-secondary btn-sm">
                            View Projects &rarr;
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
